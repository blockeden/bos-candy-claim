const chainId="d5a3d18fbb3c084e3b1f3fa98c21014b5f3db536cc15d08f9f6479517c6a3d86",host="api.bossweden.org",network={blockchain:"eos",host:host,port:443,chainId:chainId},eosOptions={broadcast:!0,sign:!0,chainId:chainId};var account;function getScatterUser(){return window.scatter?window.scatter.suggestNetwork(network).then(()=>(console.log("load network."),window.scatter.getIdentity({accounts:[network]})),err=>Promise.reject(err)).then(identity=>(console.log("=======",identity),account=identity.accounts[0],identity.accounts[0]),err=>Promise.reject(err)):(weui.toast("Scatter not loaded!"),Promise.reject("Scatter not loaded!"))}function getEOSjacksData(){let action;return{account:"eosjacksjack",name:"claimbos",authorization:[{actor:account.name,permission:account.authority}],data:{from:account.name}}}function getMixData(){let action;return{account:"bosmixsystem",name:"claim",authorization:[{actor:account.name,permission:account.authority}],data:{user:account.name}}}$(".login_btn").on("click",function(){getScatterUser().then(user=>{console.log(user),$(".account-name").val(user.name),$(".is-login").show(),$(".login-area").hide()})}),$(".logout_btn").on("click",function(){account=void 0,$(".login-area").show(),$(".is-login").hide(),window.scatter.forgetIdentity().then(()=>{})}),$(".info_btn").on("click",function(){window.open("https://bos.eosx.io/account/"+account.name,"_blank")}),$(".claim").on("click",function(){if(account){console.log($(this).text());let eos=window.scatter.eos(network,Eos,eosOptions,"https");var loading=weui.loading("生成交易",{className:"custom-classname"});let actions=[];switch($(this).text()){case"BOS Jacks":actions.push(getEOSjacksData());break;case"Mix System":actions.push(getMixData());break;case"所有糖果":actions.push(getEOSjacksData()),actions.push(getMixData())}console.log(actions),eos.transaction({actions:actions}).then(res=>{loading.hide(),weui.toast("成功",2e3),console.log(res.transaction_id),$(".tx-area").show(),$(".tx-id").text(res.transaction_id),$(".tx-id").attr("href","https://bos.eosx.io/tx/"+res.transaction_id)}).catch(err=>{let errString;loading.hide(),$(".tx-area").hide(),console.log(typeof err),errString="失败\n"+(errString="object"==typeof err?JSON.stringify(err):err),console.log(errString),weui.alert(errString)})}else weui.topTips("请登录!",2e3)});